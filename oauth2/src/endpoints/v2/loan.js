// Generated by LiveScript 1.3.1
var auth, router, ef, config, cache, cacheMiddleware, cacheLoan, cacheLoanList, cacheLoanInvestList, log, request, marketPrefix;
log = require('bunyan-hub-logger')({app: 'os', name: 'loan'});
request = require('promisingagent');
marketPrefix = require('config').proxy.market;
auth = require('../../auth');
router = require('express').Router();
module.exports = router;
ef = require('../../ef');
config = require('config');
cache = require('../../cache');
cacheMiddleware = cache.middleware('loan');
cacheLoan = cacheMiddleware('_LOAN', function (req) {
    return req.params.loanId;
});
cacheLoanList = cacheMiddleware('', function () {
    return 'LOAN_LIST';
});
cacheLoanInvestList = cacheMiddleware('_LOAN_INVEST_LIST', function (req) {
    return req.params.loanId;
});
router.get('/api/v2/loans', auth.pass());
router.get('/api/v2/loans/summary', auth.pass(), cacheLoanList);
router.get('/api/v2/loans/filter', auth.pass(), cacheLoanList);
router.get('/api/v2/loans/summary/feng', auth.pass(), cacheLoanList);
router.get('/api/v2/loans/index/feng', auth.pass(), cacheLoanList);
router.get('/api/v2/loans/product/:userId/:productKey', auth.owner());
router.get('/api/v2/loan/amount/statistic', auth.pass());
router.get('/api/v2/loan/:userId/amount/statistic', auth.pass());
router.get('/api/v2/loans/purpose/:purpose', auth.pass(), cacheLoanList);
router.get('/api/v2/loans/summary/purpose/:purpose', auth.pass(), cacheLoanList);
router.get('/api/v2/loans/getLoanWithPage', auth.pass(), cacheLoanList);
router.get('/api/v2/loan/getLoanProduct/productKey/:productKey',auth.pass(), cacheLoanList);
router.get('/api/v2/loans/getLoanWithProduct', auth.pass(), cacheLoanList);
router.get('/api/v2/loans/getRecommendLoans', auth.pass(), cacheLoanList);
router.get('/api/v2/loans/getLoan/size/:size', auth.pass());
router.get('/api/v2/loan/:loanId', auth.pass());
router.get('/api/v2/loan/:loanId/images', auth.pass());
router.get('/api/v2/loan/:loanId/invests', auth.pass(), cacheLoanInvestList);
router.get('/api/v2/loan/:loanId/invests/{page}/{pageSize}', auth.pass(), cacheLoanInvestList);
router.get('/api/v2/loan/:loanId/shadow_borrower', auth.pass());
router.get('/api/v2/loan/:loanId/user', auth.pass());
router.get('/api/v2/loan/:loanId/comments', auth.user());
router.get('/api/v2/loan/comment/list', auth.user());
router.get('/api/v2/loan/commentsByGroup/:groupId', auth.user());
router.post('/api/v2/loan/:loanId/comment/by/:userId', auth.owner());
router.get('/api/v2/loan/:loanId/overdue', auth.user());
router.get('/api/v2/loan/:loanId/repayments', auth.pass());
router.get('/api/v2/loan/:loanId/documents', auth.pass());
router.get('/api/v2/loan/:loanId/isavailable/:productId/:groupId', auth.user());
router.get('/api/v2/loan/product/getGroupId/:productId', auth.user());
router.post('/api/v2/loan/request/preview', auth.user());
router.post('/api/v2/loan/request/analyse', auth.pass());
router.post('/api/v2/loan/request/submit', auth.user());
router.get('/api/v2/loan/request/:loanRequestId', auth.user());
router.get('/api/v2/loan/request/:loanRequestId/detail', auth.pass());
router.get('/api/v2/loan/request/:loanRequestId/proofs', auth.pass());
router.get('/api/v2/loan/request/list/:userId', auth.owner());
router.get('/api/v2/loan/repay/:repayId/detail', auth.user());
router.get('/api/v2/loan/repay/:repayId/overdue', auth.user());
router.get('/api/v2/loan/repay/:repayId/overdue/detail', auth.user());
router.get('/api/v2/loan/invest/:investId/repayments', auth.pass());
router.get('/api/v2/loan/getCorporation/:corporationUserId', auth.pass());
router.get('/api/v2/loan/loanRequest/:requestId/contract/template', auth.pass());
router.get('/api/v2/loan/:loanId/detail', auth.pass());
router.get('/api/v2/loan/invest/top/:size', auth.pass());
