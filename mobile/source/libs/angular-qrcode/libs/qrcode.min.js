//---------------------------------------------------------------------
//
// QR Code Generator for JavaScript
//
// Copyright (c) 2009 Kazuhiko Arase
//
// URL: http://www.d-project.com/
//
// Licensed under the MIT license:
//  http://www.opensource.org/licenses/mit-license.php
//
// The word 'QR Code' is registered trademark of
// DENSO WAVE INCORPORATED
//  http://www.denso-wave.com/qrcode/faqpatent-e.html
//
//---------------------------------------------------------------------

var qrcode=function(){var r=function(r,t){var n=236;var i=17;var g=r;var l=e[t];var c=null;var h=0;var w=null;var d=new Array;var y={};var A=function(r,t){h=g*4+17;c=function(r){var t=new Array(r);for(var e=0;e<r;e+=1){t[e]=new Array(r);for(var n=0;n<r;n+=1){t[e][n]=null}}return t}(h);B(0,0);B(h-7,0);B(0,h-7);T();p();D(r,t);if(g>=7){M(r)}if(w==null){w=L(g,l,d)}k(w,t)};var B=function(r,t){for(var e=-1;e<=7;e+=1){if(r+e<=-1||h<=r+e)continue;for(var n=-1;n<=7;n+=1){if(t+n<=-1||h<=t+n)continue;if(0<=e&&e<=6&&(n==0||n==6)||0<=n&&n<=6&&(e==0||e==6)||2<=e&&e<=4&&2<=n&&n<=4){c[r+e][t+n]=true}else{c[r+e][t+n]=false}}}};var E=function(){var r=0;var t=0;for(var e=0;e<8;e+=1){A(true,e);var n=a.getLostPoint(y);if(e==0||r>n){r=n;t=e}}return t};var p=function(){for(var r=8;r<h-8;r+=1){if(c[r][6]!=null){continue}c[r][6]=r%2==0}for(var t=8;t<h-8;t+=1){if(c[6][t]!=null){continue}c[6][t]=t%2==0}};var T=function(){var r=a.getPatternPosition(g);for(var t=0;t<r.length;t+=1){for(var e=0;e<r.length;e+=1){var n=r[t];var i=r[e];if(c[n][i]!=null){continue}for(var o=-2;o<=2;o+=1){for(var f=-2;f<=2;f+=1){if(o==-2||o==2||f==-2||f==2||o==0&&f==0){c[n+o][i+f]=true}else{c[n+o][i+f]=false}}}}}};var M=function(r){var t=a.getBCHTypeNumber(g);for(var e=0;e<18;e+=1){var n=!r&&(t>>e&1)==1;c[Math.floor(e/3)][e%3+h-8-3]=n}for(var e=0;e<18;e+=1){var n=!r&&(t>>e&1)==1;c[e%3+h-8-3][Math.floor(e/3)]=n}};var D=function(r,t){var e=l<<3|t;var n=a.getBCHTypeInfo(e);for(var i=0;i<15;i+=1){var o=!r&&(n>>i&1)==1;if(i<6){c[i][8]=o}else if(i<8){c[i+1][8]=o}else{c[h-15+i][8]=o}}for(var i=0;i<15;i+=1){var o=!r&&(n>>i&1)==1;if(i<8){c[8][h-i-1]=o}else if(i<9){c[8][15-i-1+1]=o}else{c[8][15-i-1]=o}}c[h-8][8]=!r};var k=function(r,t){var e=-1;var n=h-1;var i=7;var o=0;var f=a.getMaskFunction(t);for(var u=h-1;u>0;u-=2){if(u==6)u-=1;while(true){for(var v=0;v<2;v+=1){if(c[n][u-v]==null){var g=false;if(o<r.length){g=(r[o]>>>i&1)==1}var l=f(n,u-v);if(l){g=!g}c[n][u-v]=g;i-=1;if(i==-1){o+=1;i=7}}}n+=e;if(n<0||h<=n){n-=e;e=-e;break}}}};var C=function(r,t){var e=0;var n=0;var i=0;var f=new Array(t.length);var u=new Array(t.length);for(var v=0;v<t.length;v+=1){var g=t[v].dataCount;var l=t[v].totalCount-g;n=Math.max(n,g);i=Math.max(i,l);f[v]=new Array(g);for(var c=0;c<f[v].length;c+=1){f[v][c]=255&r.getBuffer()[c+e]}e+=g;var h=a.getErrorCorrectPolynomial(l);var s=o(f[v],h.getLength()-1);var w=s.mod(h);u[v]=new Array(h.getLength()-1);for(var c=0;c<u[v].length;c+=1){var d=c+w.getLength()-u[v].length;u[v][c]=d>=0?w.getAt(d):0}}var y=0;for(var c=0;c<t.length;c+=1){y+=t[c].totalCount}var A=new Array(y);var B=0;for(var c=0;c<n;c+=1){for(var v=0;v<t.length;v+=1){if(c<f[v].length){A[B]=f[v][c];B+=1}}}for(var c=0;c<i;c+=1){for(var v=0;v<t.length;v+=1){if(c<u[v].length){A[B]=u[v][c];B+=1}}}return A};var L=function(r,t,e){var o=f.getRSBlocks(r,t);var v=u();for(var g=0;g<e.length;g+=1){var l=e[g];v.put(l.getMode(),4);v.put(l.getLength(),a.getLengthInBits(l.getMode(),r));l.write(v)}var c=0;for(var g=0;g<o.length;g+=1){c+=o[g].dataCount}if(v.getLengthInBits()>c*8){throw new Error("code length overflow. ("+v.getLengthInBits()+">"+c*8+")")}if(v.getLengthInBits()+4<=c*8){v.put(0,4)}while(v.getLengthInBits()%8!=0){v.putBit(false)}while(true){if(v.getLengthInBits()>=c*8){break}v.put(n,8);if(v.getLengthInBits()>=c*8){break}v.put(i,8)}return C(v,o)};y.addData=function(r){var t=v(r);d.push(t);w=null};y.isDark=function(r,t){if(r<0||h<=r||t<0||h<=t){throw new Error(r+","+t)}return c[r][t]};y.getModuleCount=function(){return h};y.make=function(){A(false,E())};y.createTableTag=function(r,t){r=r||2;t=typeof t=="undefined"?r*4:t;var e="";e+='<table style="';e+=" border-width: 0px; border-style: none;";e+=" border-collapse: collapse;";e+=" padding: 0px; margin: "+t+"px;";e+='">';e+="<tbody>";for(var n=0;n<y.getModuleCount();n+=1){e+="<tr>";for(var a=0;a<y.getModuleCount();a+=1){e+='<td style="';e+=" border-width: 0px; border-style: none;";e+=" border-collapse: collapse;";e+=" padding: 0px; margin: 0px;";e+=" width: "+r+"px;";e+=" height: "+r+"px;";e+=" background-color: ";e+=y.isDark(n,a)?"#000000":"#ffffff";e+=";";e+='"/>'}e+="</tr>"}e+="</tbody>";e+="</table>";return e};y.createImgTag=function(r,t){r=r||2;t=typeof t=="undefined"?r*4:t;var e=y.getModuleCount()*r+t*2;var n=t;var a=e-t;return s(e,e,function(t,e){if(n<=t&&t<a&&n<=e&&e<a){var i=Math.floor((t-n)/r);var o=Math.floor((e-n)/r);return y.isDark(o,i)?0:1}else{return 1}})};return y};r.stringToBytes=function(r){var t=new Array;for(var e=0;e<r.length;e+=1){var n=r.charCodeAt(e);t.push(n&255)}return t};r.createStringToBytes=function(r,t){var e=function(){var e=c(r);var n=function(){var r=e.read();if(r==-1)throw new Error;return r};var a=0;var i={};while(true){var o=e.read();if(o==-1)break;var f=n();var u=n();var v=n();var g=String.fromCharCode(o<<8|f);var l=u<<8|v;i[g]=l;a+=1}if(a!=t){throw new Error(a+" != "+t)}return i}();var n="?".charCodeAt(0);return function(r){var t=new Array;for(var a=0;a<r.length;a+=1){var i=r.charCodeAt(a);if(i<128){t.push(i)}else{var o=e[r.charAt(a)];if(typeof o=="number"){if((o&255)==o){t.push(o)}else{t.push(o>>>8);t.push(o&255)}}else{t.push(n)}}}return t}};var t={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var e={L:1,M:0,Q:3,H:2};var n={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var a=function(){var r=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];var e=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0;var a=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0;var f=1<<14|1<<12|1<<10|1<<4|1<<1;var u={};var v=function(r){var t=0;while(r!=0){t+=1;r>>>=1}return t};u.getBCHTypeInfo=function(r){var t=r<<10;while(v(t)-v(e)>=0){t^=e<<v(t)-v(e)}return(r<<10|t)^f};u.getBCHTypeNumber=function(r){var t=r<<12;while(v(t)-v(a)>=0){t^=a<<v(t)-v(a)}return r<<12|t};u.getPatternPosition=function(t){return r[t-1]};u.getMaskFunction=function(r){switch(r){case n.PATTERN000:return function(r,t){return(r+t)%2==0};case n.PATTERN001:return function(r,t){return r%2==0};case n.PATTERN010:return function(r,t){return t%3==0};case n.PATTERN011:return function(r,t){return(r+t)%3==0};case n.PATTERN100:return function(r,t){return(Math.floor(r/2)+Math.floor(t/3))%2==0};case n.PATTERN101:return function(r,t){return r*t%2+r*t%3==0};case n.PATTERN110:return function(r,t){return(r*t%2+r*t%3)%2==0};case n.PATTERN111:return function(r,t){return(r*t%3+(r+t)%2)%2==0};default:throw new Error("bad maskPattern:"+r)}};u.getErrorCorrectPolynomial=function(r){var t=o([1],0);for(var e=0;e<r;e+=1){t=t.multiply(o([1,i.gexp(e)],0))}return t};u.getLengthInBits=function(r,e){if(1<=e&&e<10){switch(r){case t.MODE_NUMBER:return 10;case t.MODE_ALPHA_NUM:return 9;case t.MODE_8BIT_BYTE:return 8;case t.MODE_KANJI:return 8;default:throw new Error("mode:"+r)}}else if(e<27){switch(r){case t.MODE_NUMBER:return 12;case t.MODE_ALPHA_NUM:return 11;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 10;default:throw new Error("mode:"+r)}}else if(e<41){switch(r){case t.MODE_NUMBER:return 14;case t.MODE_ALPHA_NUM:return 13;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 12;default:throw new Error("mode:"+r)}}else{throw new Error("type:"+e)}};u.getLostPoint=function(r){var t=r.getModuleCount();var e=0;for(var n=0;n<t;n+=1){for(var a=0;a<t;a+=1){var i=0;var o=r.isDark(n,a);for(var f=-1;f<=1;f+=1){if(n+f<0||t<=n+f){continue}for(var u=-1;u<=1;u+=1){if(a+u<0||t<=a+u){continue}if(f==0&&u==0){continue}if(o==r.isDark(n+f,a+u)){i+=1}}}if(i>5){e+=3+i-5}}}for(var n=0;n<t-1;n+=1){for(var a=0;a<t-1;a+=1){var v=0;if(r.isDark(n,a))v+=1;if(r.isDark(n+1,a))v+=1;if(r.isDark(n,a+1))v+=1;if(r.isDark(n+1,a+1))v+=1;if(v==0||v==4){e+=3}}}for(var n=0;n<t;n+=1){for(var a=0;a<t-6;a+=1){if(r.isDark(n,a)&&!r.isDark(n,a+1)&&r.isDark(n,a+2)&&r.isDark(n,a+3)&&r.isDark(n,a+4)&&!r.isDark(n,a+5)&&r.isDark(n,a+6)){e+=40}}}for(var a=0;a<t;a+=1){for(var n=0;n<t-6;n+=1){if(r.isDark(n,a)&&!r.isDark(n+1,a)&&r.isDark(n+2,a)&&r.isDark(n+3,a)&&r.isDark(n+4,a)&&!r.isDark(n+5,a)&&r.isDark(n+6,a)){e+=40}}}var g=0;for(var a=0;a<t;a+=1){for(var n=0;n<t;n+=1){if(r.isDark(n,a)){g+=1}}}var l=Math.abs(100*g/t/t-50)/5;e+=l*10;return e};return u}();var i=function(){var r=new Array(256);var t=new Array(256);for(var e=0;e<8;e+=1){r[e]=1<<e}for(var e=8;e<256;e+=1){r[e]=r[e-4]^r[e-5]^r[e-6]^r[e-8]}for(var e=0;e<255;e+=1){t[r[e]]=e}var n={};n.glog=function(r){if(r<1){throw new Error("glog("+r+")")}return t[r]};n.gexp=function(t){while(t<0){t+=255}while(t>=256){t-=255}return r[t]};return n}();function o(r,t){if(typeof r.length=="undefined"){throw new Error(r.length+"/"+t)}var e=function(){var e=0;while(e<r.length&&r[e]==0){e+=1}var n=new Array(r.length-e+t);for(var a=0;a<r.length-e;a+=1){n[a]=r[a+e]}return n}();var n={};n.getAt=function(r){return e[r]};n.getLength=function(){return e.length};n.multiply=function(r){var t=new Array(n.getLength()+r.getLength()-1);for(var e=0;e<n.getLength();e+=1){for(var a=0;a<r.getLength();a+=1){t[e+a]^=i.gexp(i.glog(n.getAt(e))+i.glog(r.getAt(a)))}}return o(t,0)};n.mod=function(r){if(n.getLength()-r.getLength()<0){return n}var t=i.glog(n.getAt(0))-i.glog(r.getAt(0));var e=new Array(n.getLength());for(var a=0;a<n.getLength();a+=1){e[a]=n.getAt(a)}for(var a=0;a<r.getLength();a+=1){e[a]^=i.gexp(i.glog(r.getAt(a))+t)}return o(e,0).mod(r)};return n}var f=function(){var r=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16]];var t=function(r,t){var e={};e.totalCount=r;e.dataCount=t;return e};var n={};var a=function(t,n){switch(n){case e.L:return r[(t-1)*4+0];case e.M:return r[(t-1)*4+1];case e.Q:return r[(t-1)*4+2];case e.H:return r[(t-1)*4+3];default:return undefined}};n.getRSBlocks=function(r,e){var n=a(r,e);if(typeof n=="undefined"){throw new Error("bad rs block @ typeNumber:"+r+"/errorCorrectLevel:"+e)}var i=n.length/3;var o=new Array;for(var f=0;f<i;f+=1){var u=n[f*3+0];var v=n[f*3+1];var g=n[f*3+2];for(var l=0;l<u;l+=1){o.push(t(v,g))}}return o};return n}();var u=function(){var r=new Array;var t=0;var e={};e.getBuffer=function(){return r};e.getAt=function(t){var e=Math.floor(t/8);return(r[e]>>>7-t%8&1)==1};e.put=function(r,t){for(var n=0;n<t;n+=1){e.putBit((r>>>t-n-1&1)==1)}};e.getLengthInBits=function(){return t};e.putBit=function(e){var n=Math.floor(t/8);if(r.length<=n){r.push(0)}if(e){r[n]|=128>>>t%8}t+=1};return e};var v=function(e){var n=t.MODE_8BIT_BYTE;var a=e;var i=r.stringToBytes(e);var o={};o.getMode=function(){return n};o.getLength=function(r){return i.length};o.write=function(r){for(var t=0;t<i.length;t+=1){r.put(i[t],8)}};return o};var g=function(){var r=new Array;var t={};t.writeByte=function(t){r.push(t&255)};t.writeShort=function(r){t.writeByte(r);t.writeByte(r>>>8)};t.writeBytes=function(r,e,n){e=e||0;n=n||r.length;for(var a=0;a<n;a+=1){t.writeByte(r[a+e])}};t.writeString=function(r){for(var e=0;e<r.length;e+=1){t.writeByte(r.charCodeAt(e))}};t.toByteArray=function(){return r};t.toString=function(){var t="";t+="[";for(var e=0;e<r.length;e+=1){if(e>0){t+=","}t+=r[e]}t+="]";return t};return t};var l=function(){var r=0;var t=0;var e=0;var n="";var a={};var i=function(r){n+=String.fromCharCode(o(r&63))};var o=function(r){if(r<0){}else if(r<26){return 65+r}else if(r<52){return 97+(r-26)}else if(r<62){return 48+(r-52)}else if(r==62){return 43}else if(r==63){return 47}throw new Error("n:"+r)};a.writeByte=function(n){r=r<<8|n&255;t+=8;e+=1;while(t>=6){i(r>>>t-6);t-=6}};a.flush=function(){if(t>0){i(r<<6-t);r=0;t=0}if(e%3!=0){var a=3-e%3;for(var o=0;o<a;o+=1){n+="="}}};a.toString=function(){return n};return a};var c=function(r){var t=r;var e=0;var n=0;var a=0;var i={};i.read=function(){while(a<8){if(e>=t.length){if(a==0){return-1}throw new Error("unexpected end of file./"+a)}var r=t.charAt(e);e+=1;if(r=="="){a=0;return-1}else if(r.match(/^\s$/)){continue}n=n<<6|o(r.charCodeAt(0));a+=6}var i=n>>>a-8&255;a-=8;return i};var o=function(r){if(65<=r&&r<=90){return r-65}else if(97<=r&&r<=122){return r-97+26}else if(48<=r&&r<=57){return r-48+52}else if(r==43){return 62}else if(r==47){return 63}else{throw new Error("c:"+r)}};return i};var h=function(r,t){var e=r;var n=t;var a=new Array(r*t);var i={};i.setPixel=function(r,t,n){a[t*e+r]=n};i.write=function(r){r.writeString("GIF87a");r.writeShort(e);r.writeShort(n);r.writeByte(128);r.writeByte(0);r.writeByte(0);r.writeByte(0);r.writeByte(0);r.writeByte(0);r.writeByte(255);r.writeByte(255);r.writeByte(255);r.writeString(",");r.writeShort(0);r.writeShort(0);r.writeShort(e);r.writeShort(n);r.writeByte(0);var t=2;var a=f(t);r.writeByte(t);var i=0;while(a.length-i>255){r.writeByte(255);r.writeBytes(a,i,255);i+=255}r.writeByte(a.length-i);r.writeBytes(a,i,a.length-i);r.writeByte(0);r.writeString(";")};var o=function(r){var t=r;var e=0;var n=0;var a={};a.write=function(r,a){if(r>>>a!=0){throw new Error("length over")}while(e+a>=8){t.writeByte(255&(r<<e|n));a-=8-e;r>>>=8-e;n=0;e=0}n=r<<e|n;e=e+a};a.flush=function(){if(e>0){t.writeByte(n)}};return a};var f=function(r){var t=1<<r;var e=(1<<r)+1;var n=r+1;var i=u();for(var f=0;f<t;f+=1){i.add(String.fromCharCode(f))}i.add(String.fromCharCode(t));i.add(String.fromCharCode(e));var v=g();var l=o(v);l.write(t,n);var c=0;var h=String.fromCharCode(a[c]);c+=1;while(c<a.length){var s=String.fromCharCode(a[c]);c+=1;if(i.contains(h+s)){h=h+s}else{l.write(i.indexOf(h),n);if(i.size()<4095){if(i.size()==1<<n){n+=1}i.add(h+s)}h=s}}l.write(i.indexOf(h),n);l.write(e,n);l.flush();return v.toByteArray()};var u=function(){var r={};var t=0;var e={};e.add=function(n){if(e.contains(n)){throw new Error("dup key:"+n)}r[n]=t;t+=1};e.size=function(){return t};e.indexOf=function(t){return r[t]};e.contains=function(t){return typeof r[t]!="undefined"};return e};return i};var s=function(r,t,e,n){var a=h(r,t);for(var i=0;i<t;i+=1){for(var o=0;o<r;o+=1){a.setPixel(o,i,e(o,i))}}var f=g();a.write(f);var u=l();var v=f.toByteArray();for(var c=0;c<v.length;c+=1){u.writeByte(v[c])}u.flush();var s="";s+="<img";s+=' src="';s+="data:image/gif;base64,";s+=u;s+='"';s+=' width="';s+=r;s+='"';s+=' height="';s+=t;s+='"';if(n){s+=' alt="';s+=n;s+='"'}s+="/>";return s};return r}();
