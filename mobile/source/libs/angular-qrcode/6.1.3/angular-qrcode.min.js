/*
 * angular-qrcode v6.1.3
 * (c) 2013 Monospaced http://monospaced.com
 * License: MIT
 */

(function(e,r){angular.module("monospaced.qrcode",[]).directive("qrcode",["$window",function(e){var r=!!e.CanvasRenderingContext2D,n={L:"Low",M:"Medium",Q:"Quartile",H:"High"},t=function(e,r,n,t){for(var i=0;i<n;i++){for(var o=0;o<n;o++){var a=Math.ceil((o+1)*t)-Math.floor(o*t),f=Math.ceil((i+1)*t)-Math.floor(i*t);e.fillStyle=r.isDark(i,o)?"#000":"#fff";e.fillRect(Math.round(o*t),Math.round(i*t),a,f)}}};return{restrict:"E",template:'<canvas class="qrcode"></canvas>',link:function(e,i,o){var a=i[0],f=i.find("canvas"),c=f[0],u=r?c.getContext("2d"):null,d="download"in o,s=o.href,l=d||s?document.createElement("a"):"",h=/^\s+|\s+$/g,v,m,g,M,w,q,p,C,$,L=function(e){m=Math.max(1,Math.min(parseInt(e,10),10))||4},b=function(e){g=e in n?e:"M"},D=function(e){if(!e){return}M=e.replace(h,"");C=qrcode(m,g);C.addData(M);try{C.make()}catch(r){v=r.message;return}v=false;q=C.getModuleCount()},k=function(e){w=parseInt(e,10)||q*2;p=w/q;c.width=c.height=w},H=function(){if(!C){return}if(v){if(l){l.removeAttribute("download");l.title="";l.href="#_"}if(!r){a.innerHTML='<img src width="'+w+'"'+'height="'+w+'"'+'class="qrcode">'}e.$emit("qrcode:error",v);return}if(d){a.download="qrcode.png";a.title="Download QR code"}if(r){t(u,C,q,p);if(d){a.href=c.toDataURL("image/png");return}}else{a.innerHTML=C.createImgTag(p,0);$=i.find("img");$.addClass("qrcode");if(d){a.href=$[0].src;return}}if(s){a.href=s}};if(l){l.className="qrcode-link";f.wrap(l);a=a.firstChild}L(o.version);b(o.errorCorrectionLevel);k(o.size);o.$observe("version",function(e){if(!e){return}L(e);D(M);k(w);H()});o.$observe("errorCorrectionLevel",function(e){if(!e){return}b(e);D(M);k(w);H()});o.$observe("data",function(e){if(!e){return}D(e);k(w);H()});o.$observe("size",function(e){if(!e){return}k(e);H()});o.$observe("href",function(e){if(!e){return}s=e;H()})}}}]);r[""]=e})({},function(){return this}());
